<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>회원가입</title>
<style>
*{margin:0 auto;}
body {margin:20px auto;}
legend {font-size:30pt; font-weight:bold;}
fieldset {width:510px; height:680px; margin:0 auto; border-radius:10%}
form {margin:0 auto; width:500px;}
label {font-weight:bold;}
input{height:20px; border:1px solid lightgray;}
input[type=text],input[type=password],input[type=passwordCheck] {background-color:#EAEAEA;}
input[type=button] {background-color:#B5B2FF;
                    border:1px solid #B5B2FF;}
select {height:25px;}
div {border:1px solid lightgray;}
input[id=id] {width:80%;}
input[id=jumin1],input[id=jumin2] {width:30%}
input[id=post1] {width:80%}
button {margin-left:20px;}
button[type=submit] {width:200px;height:40px;color:white;
                      font-size:15pt; font-weight:bold;
                      border:1px solid #86E57F;
                       background-color:#86E57F;}
button[type=reset] {width:200px;height:40px;color:white;
                     font-size:15pt; font-weight:bold;
                     border:1px solid #FFCA6C;
                       background-color:#FFCA6C;}
button:hover {opacity:0.8}
</style>
<script src="jquery-3.4.1.js"></script>
<script>
   $(document).ready(function(){
	   //id중복검사 첫번째 버튼으로 불러오기
	   var id_val;//비교할 id선언
	   $('input:button').first().click(function(){
		   var id = $('#id').val().trim();
		   var pattern = /^[A-Z][A-Za-z0-9]{3,}$/;
		   if(pattern.test(id)){
			   id_val = id;//중복검사 통과한 입력받은 id저장
			 //사용자가 입력한 방식을 get방식으로 넘긴다
		     var ref="idcheck.html?id="+id;
			 //팝업창을 이용한 자료를 넘김
	     	  window.open(ref,'idcheck','width=300, height=250')
		   }else {
			
			   alert("id는 대문자로 시작하고 총 4자리 이상입니다");
			  //id값 지우고 포커스 주는 거 한번에 이어서 적을 수 있음
			   $('#id').val('').focus();
			   return false;
		   }
	   });
	   //주민 앞자리
	   $('#jumin1').keyup(function(){
		  var jumin1 = $('#jumin1').val();
		  if($('#jumin1').val().length==6){
			  var pattern = /^[0-9]{2}(0[1-9]|1[0-2])(0[1-9]|[12][0-9]|[3][01])$/;
			  if(pattern.test(jumin1)){
					$('#jumin2').focus();
		        }else {
		        	alert("숫자 또는 형식에 맞게 입력하세요");
		        	$('#jumin1').val(''); //앞자리 모두 초기화
		        	$('#jumin1').focus(); //앞자리에 포커스 준다.
		           }
		  }
	   });
	   //주민 뒷자리
	   $('#jumin2').keyup(function(){
		  var jumin2 = $('#jumin2').val();
		  if($('#jumin2').val().length==7){
			  var pattern = /^[1-4]{1}[0-9]{6}$/;
		      if(pattern.test(jumin2)){
				 var c = $('#jumin2').val().substring(0,1);
				 var index = (c-1)%2; //c=1,3이면 index=0
				                      //c=2,4이면 index=1
				 $('input[type=radio]').eq(index).prop('checked',true);
		      }else {
		        	alert("숫자 또는 형식에 맞게 입력하세요!!!");
		        	$('#jumin2').val(''); //뒷자리 모두 초기화
		        	$('#jumin2').focus(); //뒷자리에 포커스 준다.
		           }
		  }
	   });
	   
	   //도메인 수정 불가
	   $('#sel').change(function(){
		   var sel = $('#sel').val();
			if(sel=="") { //직접 선택한 경우
				$('#domain').prop('readOnly',false);
				$('#domain').val('');
				$('#domain').focus();
			}else { //option중에서 선택한 경우
				$('#domain').prop('readOnly', true); //수정불가
				$('#domain').val(sel);
			} 
	   });
	 
	   //우편번호 
	  $('input:button').last().click(function(){
		  window.open('post.html','post','width=400, height=500'); 
	  });
		   
	  $('#myform').submit(function(){
		//$.trim()은 $('#id').val()값의 공백을 제거한다
		 if($.trim($('#id').val())==''){
			 alert("id를 입력하세요");
			 $('#id').focus();
			 return false;
		 }
		 //제출할 때 id확인(입력한 id와 같은가)
		 var idcheck = $.trim($('#id').val());
	     if(idcheck!=id_val){//위에서 저장한 id와 비교
	    	 alert("id중복검사 하세요");
	    	 return false;
	     }
		 var pass = $('#pass').val();
		 if(pass==''){
			 alert("비밀번호를 입력하세요");
			 $('#pass').focus();
			 return false;
		 }
		 //비밀번호 같은지 확인
		 var passCheck = $('#passCheck').val();
		 if(pass==''){
			 alert("비밀번호를 다시 입력하세요");
			 $('#passCheck').focus();
			 return false;
		 }
		 var jumin1 = $('#jumin1').val();
		 if(jumin1==''){
			 alert("주민번호 앞자리를 입력하세요");
			 $('#jumin1').focus();
			 return false;
		 }
		 if($('#jumin1').val().length!=6){
		     alert("주민번호 앞자리는 6자리입니다");
	         $('#jumin1').focus();
	         return false;
	     }
		 var jumin2 = $('#jumin2').val();
		 if(jumin2==''){
			 alert("주민번호 뒷자리를 입력하세요");
			 $('#jumin2').focus();
			 return false;
		 }
		 if($('#jumin2').val().length!=7){
	         alert("주민번호 뒷자리는 7자리입니다");
             $('#jumin2').focus();
             return false;
         }
		 var email = $('#email').val();
		 if(email==''){
			 alert("이메일 앞자리를 입력하세요");
			 $('#email').focus();
			 return false;
		 }
		 var domain = $('#domain').val();
		 if(domain==''){
			 alert("이메일 도메인을 입력하세요");
			 $('#domain').focus();
			 return false;
		 }
		 //성별 선택
		 if(!($('#gender1').is(':checked'))&&
				 !($('#gender2').is(':checked'))&&
				 !($('#gender3').is(':checked'))){
			 alert("성별을 선택하세요");
			 return false;
		 }
		 //선호 장르 선택
	     if((!$('#ganre1').is(':checked'))&&
	        (!$('#ganre2').is(':checked'))&&
	        (!$('#ganre3').is(':checked'))&&
	        (!$('#ganre4').is(':checked'))&&
	        (!$('#ganre5').is(':checked'))){
	    	 alert("선호 장르를 선택하세요");
	    	 return false;
	     }
		 //선호 장르 2개 이상
		 var hobbys = $('input[type=checkbox]:checked');
		 if(hobbys.length<2){
			 alert("선호 장르를 2개 이상 선택하세요");
			 return false;
		 }
		 var post1 = $('#post1').val();
		 if(post1==''){
			 alert("우편번호를 입력하세요");
		     $('#post1').focus();
		     return false;
		 }
		 var address = $('#address').val();
		 if(address==''){
			 alert("주소를 입력하세요");
			 $('#address').focus();
			 return false;
		 }
		
	  }); 
   });
</script>
</head>
<body>
<form method="get" action="jqr9_타겟.html" name="myform"
      id="myform"> 
 <fieldset>
  <legend>Sign up</legend>
  <table>
  <tr>
  <td>
   <label>ID</label><br>
   <input type=text size=10 name=id id=id 
           placeholder="Enter id">
   <input type=button value="ID중복검사"><br>
   </td>
   </tr>
   <tr>
   <td>
   <label>비밀번호</label><br>
   <input type=password name=pass id=pass
          placeholder="Enter Password"><br>
   </td>
   </tr>
   <tr>
   <td>
   <label>비밀번호 확인</label><br>
   <input type=passwordCheck name=passcheck id=passcheck
          placeholder="Enter Password"><br>
   </td>
   </tr>
   <tr>
   <td>
   <br>
   <label>주민번호</label><br>
         앞자리<input type=text size=6 maxLength=6 
         name=jumin1 id=jumin1>
         뒷자리<input type=text size=7 maxLength=7 
         name=jumin2 id=jumin2><br>
          </td>
   </tr>
   <tr>
   <td>
   <br>
   <label>E-Mail</label><br>
   <input type=text name=email id=email>
   @
   <input type=text name=domain id=domain>
    <select name=sel id=sel>
      <option value="">직접입력</option>
      <option value="naver.com">naver.com</option>
      <option value="daum.net">daum.net</option>
      <option value="nate.com">nate.com</option>
      <option value="gmail.com">gmail.com</option>
   </select><br>
   </td>
   </tr>
   <tr>
   <td>
   <br>
   <label>성별</label><br>
   <div>
      <input type=radio name=gender value=m id=gender1>남자
      <input type=radio name=gender value=f id=gender2>여자
      <input type=radio name=gender value=e id=gender3>기타
   </div>
   </td>
   </tr>
   <tr>
   <td>
      <br>
   <label>선호하는 영화 장르</label><br>
   <div>
      <input type=checkbox name=ganre id=ganre1 value="로맨스">로맨스
      <input type=checkbox name=ganre id=ganre2 value="코미디">코미디
      <input type=checkbox name=ganre id=ganre3 value="공포">공포
      <input type=checkbox name=ganre id=ganre4 value="액션">액션
      <input type=checkbox name=ganre id=ganre5 value="드라마">드라마
   </div>
   </td>
   </tr>
   <tr>
   <td>
   <br>
   <label>우편번호</label><br>
      <input type=text size=3 maxLength=3 name=post1 id=post1>                     
      <input type=button value="우편검색"><br>
   <label>주소</label><br>
      <input type=text size=50 name=address id=address>
   <br>
   </td>
   </tr>
   <tr>
   <td>
   <br>
      <button type=submit value="회원가입">가입</button>
      <button type=reset value="취소">취소</button>
   </td>
   </tr>
   </table>  
 </fieldset>
</form>
</body>
</html>